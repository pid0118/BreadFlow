<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.breadflow.app.mtrqplan.mapper.MtrqplanMapper">

<!-- 모달창에 쓰일 재료(ingredient) 전체 조회 -->
<select id="selectIngrdntList" parameterType="MtrqplanVO">
	SELECT  major
	        , sub
	        , ingredient_code
	        , ingredient_name
	        , FIND_CD(unit) AS unit_name
	        , unit
	FROM 	ingredient
	ORDER BY ingredient_code
</select>

<insert id="insertMtrqplan" parameterType="MtrqplanVO">
	<selectKey resultType="string" keyProperty="matrequiredPlanNo" order="BEFORE">
		SELECT 'JP' || PLANSEQ('MATREQUIRED_PLAN','MATREQUIRED_PLAN_NO') FROM dual
	</selectKey>
	INSERT INTO matrequired_plan
	(
	    matrequired_plan_no
	    , production_plan_no
	    , start_date
	    , last_date
	    , delivery_location
	    , supply_company
	    , writer
	) VALUES (
	    #{matrequiredPlanNo}
	    , #{productionPlanNo}
	    , #{startDate}
	    , #{lastDate}
	    , #{deliveryLocation}
	    , #{supplyCompany}
	    , #{writer}
	)
</insert>
</mapper>